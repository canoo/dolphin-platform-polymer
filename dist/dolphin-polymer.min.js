!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.dolphin=e()}}(function(){var e;return function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return o(r?r:t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/$.core").Map},{"../modules/$.core":9,"../modules/es6.map":45,"../modules/es6.object.to-string":46,"../modules/es6.string.iterator":47,"../modules/es7.map.to-json":48,"../modules/web.dom.iterable":49}],2:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],3:[function(e,t,r){var n=e("./$.is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":19}],4:[function(e,t,r){var n=e("./$.cof"),o=e("./$.wks")("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[o])?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./$.cof":5,"./$.wks":42}],5:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],6:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.hide"),i=e("./$.ctx"),a=e("./$.species"),s=e("./$.strict-new"),u=e("./$.defined"),c=e("./$.for-of"),l=e("./$.iter-step"),f=e("./$.uid")("id"),p=e("./$.has"),d=e("./$.is-object"),h=Object.isExtensible||d,y=e("./$.support-desc"),v=y?"_s":"size",$=0,b=function(e,t){if(!d(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!p(e,f)){if(!h(e))return"F";if(!t)return"E";o(e,f,++$)}return"O"+e[f]},m=function(e,t){var r,n=b(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(t,r,o,a){var l=t(function(e,t){s(e,l,r),e._i=n.create(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=t&&c(t,o,e[a],e)});return e("./$.mix")(l.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[v]=0},"delete":function(e){var t=this,r=m(t,e);if(r){var n=r.n,o=r.p;delete t._i[r.i],r.r=!0,o&&(o.n=n),n&&(n.p=o),t._f==r&&(t._f=n),t._l==r&&(t._l=o),t[v]--}return!!r},forEach:function(e){for(var t,r=i(e,arguments[1],3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!m(this,e)}}),y&&n.setDesc(l.prototype,"size",{get:function(){return u(this[v])}}),l},def:function(e,t,r){var n,o,i=m(e,t);return i?i.v=r:(e._l=i={i:o=b(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[v]++,"F"!==o&&(e._i[o]=i)),e},getEntry:m,setStrong:function(t,r,n){e("./$.iter-define")(t,r,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?l(0,r.k):"values"==t?l(0,r.v):l(0,[r.k,r.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),a(t),a(e("./$.core")[r])}}},{"./$":26,"./$.core":9,"./$.ctx":10,"./$.defined":12,"./$.for-of":14,"./$.has":16,"./$.hide":17,"./$.is-object":19,"./$.iter-define":23,"./$.iter-step":24,"./$.mix":28,"./$.species":32,"./$.strict-new":33,"./$.support-desc":35,"./$.uid":40}],7:[function(e,t,r){var n=e("./$.for-of"),o=e("./$.classof");t.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+"#toJSON isn't generic");var t=[];return n(this,!1,t.push,t),t}}},{"./$.classof":4,"./$.for-of":14}],8:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.def"),i=e("./$.hide"),a=e("./$.iter-buggy"),s=e("./$.for-of"),u=e("./$.strict-new");t.exports=function(t,r,c,l,f,p){var d=e("./$.global")[t],h=d,y=f?"set":"add",v=h&&h.prototype,$={};return e("./$.support-desc")&&"function"==typeof h&&(p||!a&&v.forEach&&v.entries)?(h=r(function(e,r){u(e,h,t),e._c=new d,void 0!=r&&s(r,f,e[y],e)}),n.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(e){var t="add"==e||"set"==e;e in v&&(!p||"clear"!=e)&&i(h.prototype,e,function(r,n){var o=this._c[e](0===r?0:r,n);return t?this:o})}),"size"in v&&n.setDesc(h.prototype,"size",{get:function(){return this._c.size}})):(h=l.getConstructor(r,t,f,y),e("./$.mix")(h.prototype,c)),e("./$.tag")(h,t),$[t]=h,o(o.G+o.W+o.F,$),p||l.setStrong(h,t,f),h}},{"./$":26,"./$.def":11,"./$.for-of":14,"./$.global":15,"./$.hide":17,"./$.iter-buggy":20,"./$.mix":28,"./$.strict-new":33,"./$.support-desc":35,"./$.tag":36}],9:[function(e,t,r){var n=t.exports={};"number"==typeof __e&&(__e=n)},{}],10:[function(e,t,r){var n=e("./$.a-function");t.exports=function(e,t,r){if(n(e),~r&&void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":2}],11:[function(e,t,r){var n=e("./$.global"),o=e("./$.core"),i="prototype",a=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t,r){var u,c,l,f,p=e&s.G,d=e&s.P,h=p?n:e&s.S?n[t]:(n[t]||{})[i],y=p?o:o[t]||(o[t]={});p&&(r=t);for(u in r)c=!(e&s.F)&&h&&u in h,c&&u in y||(l=c?h[u]:r[u],p&&"function"!=typeof h[u]?f=r[u]:e&s.B&&c?f=a(l,n):e&s.W&&h[u]==l?!function(e){f=function(t){return this instanceof e?new e(t):e(t)},f[i]=e[i]}(l):f=d&&"function"==typeof l?a(Function.call,l):l,y[u]=f,d&&((y[i]||(y[i]={}))[u]=l))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},{"./$.core":9,"./$.global":15}],12:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],13:[function(e,t,r){var n=e("./$.cof"),o=Object;t.exports=0 in o("z")?o:function(e){return"String"==n(e)?e.split(""):o(e)}},{"./$.cof":5}],14:[function(e,t,r){var n=e("./$.ctx"),o=e("./$.iter-call"),i=e("./$.is-array-iter"),a=e("./$.an-object"),s=e("./$.to-length"),u=e("./core.get-iterator-method");t.exports=function(e,t,r,c){var l,f,p,d=u(e),h=n(r,c,t?2:1),y=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(i(d))for(l=s(e.length);l>y;y++)t?h(a(f=e[y])[0],f[1]):h(e[y]);else for(p=d.call(e);!(f=p.next()).done;)o(p,h,f.value,t)}},{"./$.an-object":3,"./$.ctx":10,"./$.is-array-iter":18,"./$.iter-call":21,"./$.to-length":38,"./core.get-iterator-method":43}],15:[function(e,t,r){var n="undefined"!=typeof self&&self.Math==Math?self:Function("return this")();t.exports=n,"number"==typeof __g&&(__g=n)},{}],16:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],17:[function(e,t,r){var n=e("./$"),o=e("./$.property-desc");t.exports=e("./$.support-desc")?function(e,t,r){return n.setDesc(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./$":26,"./$.property-desc":29,"./$.support-desc":35}],18:[function(e,t,r){var n=e("./$.iterators"),o=e("./$.wks")("iterator");t.exports=function(e){return("Array"in n?n.Array:Array.prototype[o])===e}},{"./$.iterators":25,"./$.wks":42}],19:[function(e,t,r){t.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},{}],20:[function(e,t,r){t.exports="keys"in[]&&!("next"in[].keys())},{}],21:[function(e,t,r){var n=e("./$.an-object"),o=function(e){var t=e["return"];void 0!==t&&n(t.call(e))};t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(a){throw o(e),a}}},{"./$.an-object":3}],22:[function(e,t,r){"use strict";var n=e("./$"),o={};e("./$.hide")(o,e("./$.wks")("iterator"),function(){return this}),t.exports=function(t,r,i){t.prototype=n.create(o,{next:e("./$.property-desc")(1,i)}),e("./$.tag")(t,r+" Iterator")}},{"./$":26,"./$.hide":17,"./$.property-desc":29,"./$.tag":36,"./$.wks":42}],23:[function(e,t,r){"use strict";var n=e("./$.library"),o=e("./$.def"),i=e("./$.redef"),a=e("./$.hide"),s=e("./$.has"),u=e("./$.wks")("iterator"),c=e("./$.iterators"),l="@@iterator",f="keys",p="values",d=function(){return this};t.exports=function(t,r,h,y,v,$,b){e("./$.iter-create")(h,r,y);var m,g,w=function(e){switch(e){case f:return function(){return new h(this,e)};case p:return function(){return new h(this,e)}}return function(){return new h(this,e)}},E=r+" Iterator",x=t.prototype,j=x[u]||x[l]||v&&x[v],A=j||w(v);if(j){var _=e("./$").getProto(A.call(new t));e("./$.tag")(_,E,!0),!n&&s(x,l)&&a(_,u,d)}if((!n||b)&&a(x,u,A),c[r]=A,c[E]=d,v)if(m={keys:$?A:w(f),values:v==p?A:w(p),entries:v!=p?A:w("entries")},b)for(g in m)g in x||i(x,g,m[g]);else o(o.P+o.F*e("./$.iter-buggy"),r,m)}},{"./$":26,"./$.def":11,"./$.has":16,"./$.hide":17,"./$.iter-buggy":20,"./$.iter-create":22,"./$.iterators":25,"./$.library":27,"./$.redef":30,"./$.tag":36,"./$.wks":42}],24:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],25:[function(e,t,r){t.exports={}},{}],26:[function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],27:[function(e,t,r){t.exports=!0},{}],28:[function(e,t,r){var n=e("./$.redef");t.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},{"./$.redef":30}],29:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],30:[function(e,t,r){t.exports=e("./$.hide")},{"./$.hide":17}],31:[function(e,t,r){var n=e("./$.global"),o="__core-js_shared__",i=n[o]||(n[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./$.global":15}],32:[function(e,t,r){var n=e("./$"),o=e("./$.wks")("species");t.exports=function(t){!e("./$.support-desc")||o in t||n.setDesc(t,o,{configurable:!0,get:function(){return this}})}},{"./$":26,"./$.support-desc":35,"./$.wks":42}],33:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},{}],34:[function(e,t,r){var n=e("./$.to-integer"),o=e("./$.defined");t.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return 0>u||u>=c?e?"":void 0:(i=s.charCodeAt(u),55296>i||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},{"./$.defined":12,"./$.to-integer":37}],35:[function(e,t,r){t.exports=!!function(){try{return 2==Object.defineProperty({},"a",{get:function(){return 2}}).a}catch(e){}}()},{}],36:[function(e,t,r){var n=e("./$.has"),o=e("./$.hide"),i=e("./$.wks")("toStringTag");t.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,i)&&o(e,i,t)}},{"./$.has":16,"./$.hide":17,"./$.wks":42}],37:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],38:[function(e,t,r){var n=e("./$.to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./$.to-integer":37}],39:[function(e,t,r){var n=e("./$.es5-object"),o=e("./$.defined");t.exports=function(e,t){return(t?Object:n)(o(e))}},{"./$.defined":12,"./$.es5-object":13}],40:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],41:[function(e,t,r){t.exports=function(){}},{}],42:[function(e,t,r){var n=e("./$.shared")("wks"),o=e("./$.global").Symbol;t.exports=function(t){return n[t]||(n[t]=o&&o[t]||(o||e("./$.uid"))("Symbol."+t))}},{"./$.global":15,"./$.shared":31,"./$.uid":40}],43:[function(e,t,r){var n=e("./$.global"),o=e("./$.classof"),i=e("./$.wks")("iterator"),a=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){var t=n.Symbol;return void 0!=e?e[t&&t.iterator||"@@iterator"]||e[i]||a[o(e)]:void 0}},{"./$.classof":4,"./$.core":9,"./$.global":15,"./$.iterators":25,"./$.wks":42}],44:[function(e,t,r){var n=e("./$.unscope"),o=e("./$.iter-step"),i=e("./$.iterators"),a=e("./$.to-object");e("./$.iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./$.iter-define":23,"./$.iter-step":24,"./$.iterators":25,"./$.to-object":39,"./$.unscope":41}],45:[function(e,t,r){"use strict";var n=e("./$.collection-strong");e("./$.collection")("Map",function(e){return function(){return e(this,arguments[0])}},{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},{"./$.collection":8,"./$.collection-strong":6}],46:[function(e,t,r){},{}],47:[function(e,t,r){var n=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":23,"./$.string-at":34}],48:[function(e,t,r){var n=e("./$.def");n(n.P,"Map",{toJSON:e("./$.collection-to-json")("Map")})},{"./$.collection-to-json":7,"./$.def":11}],49:[function(e,t,r){e("./es6.array.iterator");var n=e("./$.iterators");n.NodeList=n.HTMLCollection=n.Array},{"./$.iterators":25,"./es6.array.iterator":44}],50:[function(t,r,n){(function(o){!function(t){if("object"==typeof n&&"undefined"!=typeof r)r.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.dolphin=t()}}(function(){return function e(r,n,o){function i(s,u){if(!n[s]){if(!r[s]){var c="function"==typeof t&&t;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};r[s][0].call(f.exports,function(e){var t=r[s][1][e];return i(t?t:e)},f,f.exports,e,r,n,o)}return n[s].exports}for(var a="function"==typeof t&&t,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,r){"use strict";function n(e,t){var r=t.presentationModelType;switch(r){case d:e.classRepository.registerClass(t);break;case h:e.classRepository.addListEntry(t),e.opendolphin.deletePresentationModel(t);break;case y:e.classRepository.delListEntry(t),e.opendolphin.deletePresentationModel(t);break;case v:e.classRepository.setListEntry(t),e.opendolphin.deletePresentationModel(t);break;default:var n=e.classRepository.load(t),o=e.addedHandlers.get(r);l(o)&&o.forEach(function(e){e(n)}),e.allAddedHandlers.forEach(function(e){e(n)})}}function o(e,t){var r=t.presentationModelType;switch(r){case d:e.classRepository.unregisterClass(t);break;case h:case y:case v:break;default:var n=e.classRepository.unload(t);if(l(n)){var o=e.removedHandlers.get(r);l(o)&&o.forEach(function(e){e(n)}),e.allRemovedHandlers.forEach(function(e){e(n)})}}}function i(e,t,r){var i=50;if(l(t)&&(t.serverPush&&e.opendolphin.startPushListening("ServerPushController:longPoll","ServerPushController:release"),t.observeInterval&&(i=t.observeInterval)),e.classRepository=r?new p(e.opendolphin):new f,r)e.classRepository.onBeanUpdate(function(t,r,n,o,i){var a=e.updatedHandlers.get(t);l(a)&&a.forEach(function(e){e(r,n,o,i)}),e.allUpdatedHandlers.forEach(function(e){e(r,n,o,i)})}),e.classRepository.onArrayUpdate(function(t,r,n,o,i,a){var s=e.arrayUpdatedHandlers.get(t);l(s)&&s.forEach(function(e){e(r,n,o,i,a)}),e.allArrayUpdatedHandlers.forEach(function(e){e(r,n,o,i,a)})});else{var a=!1;!function s(){setTimeout(function(){Platform.performMicrotaskCheckpoint(),a||s()},i)}(),e.shutdown=function(){a=!0}}e.opendolphin.getClientModelStore().onModelStoreChange(function(t){var r=t.clientPresentationModel,i=r.findAttributeByPropertyName($);l(i)&&i.value===m&&(t.eventType===opendolphin.Type.ADDED?n(e,r):t.eventType===opendolphin.Type.REMOVED&&o(e,r))}),e.ready=!0}function a(e,t,r){this.addedHandlers=new u,this.removedHandlers=new u,this.updatedHandlers=new u,this.arrayUpdatedHandlers=new u,this.allAddedHandlers=[],this.allRemovedHandlers=[],this.allUpdatedHandlers=[],this.allArrayUpdatedHandlers=[],this.ready=!1;var n=opendolphin.makeDolphin().url(e).reset(t).slackMS(4);l(r)&&l(r.errorHandler)&&n.errorHandler(r.errorHandler),this.opendolphin=n.build()}e("./polyfills.js");var s,u=e("../bower_components/core.js/library/fn/map"),c=e("../bower_components/core.js/library/fn/promise"),l=e("./utils.js").exists,f=e("./classrepo.js").ClassRepository,p=e("./newclassrepo.js").ClassRepository;r.connect=function(e,t){var r=new a(e,!0);return i(r,t,!1),r},r.connect2=function(e,t){var r=new a(e,!1,t);return s=new c(function(n,o){var a=new XMLHttpRequest;a.withCredentials=!0,a.onload=function(){200==a.status?(i(r,t,!0),n()):o(Error(a.statusText))},a.onerror=function(){o(Error("Network Error"))},a.open("POST",e+"invalidate?"),a.send()}),r};var d="@@@ DOLPHIN_BEAN @@@",h="@@@ LIST_ADD @@@",y="@@@ LIST_DEL @@@",v="@@@ LIST_SET @@@",$="@@@ SOURCE_SYSTEM @@@",b="client",m="server";a.prototype.notifyBeanChange=function(e,t,r){return this.classRepository.notifyBeanChange(e,t,r)},a.prototype.notifyArrayChange=function(e,t,r,n,o){this.classRepository.notifyArrayChange(e,t,r,n,o)},a.prototype.isManaged=function(e){throw new Error("Not implemented yet")},a.prototype.create=function(e){throw new Error("Not implemented yet")},a.prototype.add=function(e,t){throw new Error("Not implemented yet")},a.prototype.addAll=function(e,t){throw new Error("Not implemented yet")},a.prototype.remove=function(e){throw new Error("Not implemented yet")},a.prototype.removeAll=function(e){throw new Error("Not implemented yet")},a.prototype.removeIf=function(e){throw new Error("Not implemented yet")},a.prototype.onAdded=function(e,t){var r=this;if(l(t)){var n=r.addedHandlers.get(e);return l(n)||(n=[]),r.addedHandlers.set(e,n.concat(t)),{unsubscribe:function(){var n=r.addedHandlers.get(e);l(n)&&r.addedHandlers.set(e,n.filter(function(e){return e!==t}))}}}return t=e,r.allAddedHandlers=r.allAddedHandlers.concat(t),{unsubscribe:function(){r.allAddedHandlers=r.allAddedHandlers.filter(function(e){return e!==t})}}},a.prototype.onRemoved=function(e,t){var r=this;if(l(t)){var n=r.removedHandlers.get(e);return l(n)||(n=[]),r.removedHandlers.set(e,n.concat(t)),{unsubscribe:function(){var n=r.removedHandlers.get(e);l(n)&&r.removedHandlers.set(e,n.filter(function(e){return e!==t}))}}}return t=e,r.allRemovedHandlers=r.allRemovedHandlers.concat(t),{unsubscribe:function(){r.allRemovedHandlers=r.allRemovedHandlers.filter(function(e){return e!==t})}}},a.prototype.onBeanUpdate=function(e,t){var r=this;if(l(t)){var n=r.updatedHandlers.get(e);return l(n)||(n=[]),r.updatedHandlers.set(e,n.concat(t)),{unsubscribe:function(){var n=r.updatedHandlers.get(e);l(n)&&r.updatedHandlers.set(e,n.filter(function(e){return e!==t}))}}}return t=e,r.allUpdatedHandlers=r.allUpdatedHandlers.concat(t),{unsubscribe:function(){r.allUpdatedHandlers=r.allUpdatedHandlers.filter(function(e){return e!==t})}}},a.prototype.onArrayUpdate=function(e,t){var r=this;if(l(t)){var n=r.arrayUpdatedHandlers.get(e);return l(n)||(n=[]),r.arrayUpdatedHandlers.set(e,n.concat(t)),{unsubscribe:function(){var n=r.arrayUpdatedHandlers.get(e);l(n)&&r.arrayUpdatedHandlers.set(e,n.filter(function(e){return e!==t}))}}}return t=e,r.allArrayUpdatedHandlers=r.allArrayUpdatedHandlers.concat(t),{unsubscribe:function(){r.allArrayUpdatedHandlers=r.allArrayUpdatedHandlers.filter(function(e){return e!==t})}}},a.prototype.send=function(e,t){if(l(t)){var r=[this.opendolphin.attribute($,null,b)];for(var n in t)if(t.hasOwnProperty(n)){var o=this.classRepository.mapParamToDolphin(t[n]);r.push(this.opendolphin.attribute(n,null,o.value,"VALUE")),r.push(this.opendolphin.attribute(n,null,o.type,"VALUE_TYPE"))}this.opendolphin.presentationModel.apply(this.opendolphin,[null,"@@@ DOLPHIN_PARAMETER @@@"].concat(r))}var i=this.opendolphin,a=function(t){i.send(e,{onFinished:function(){t()}})},u=this.ready?a:function(e){s.then(function(){a(e)})};return new c(u)}},{"../bower_components/core.js/library/fn/map":2,"../bower_components/core.js/library/fn/promise":3,"./classrepo.js":26,"./newclassrepo.js":27,"./polyfills.js":28,"./utils.js":29}],2:[function(e,t,r){e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),t.exports=e("../modules/$").core.Map},{"../modules/$":14,"../modules/es6.map":22,"../modules/es6.string.iterator":24,"../modules/web.dom.iterable":25}],3:[function(e,t,r){e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$").core.Promise},{"../modules/$":14,"../modules/es6.promise":23,"../modules/es6.string.iterator":24,"../modules/web.dom.iterable":25}],4:[function(e,t,r){function n(e,t,r){if(!e)throw TypeError(r?t+r:t)}var o=e("./$");n.def=o.assertDefined,n.fn=function(e){if(!o.isFunction(e))throw TypeError(e+" is not a function!");return e},n.obj=function(e){if(!o.isObject(e))throw TypeError(e+" is not an object!");return e},n.inst=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e},t.exports=n},{"./$":14}],5:[function(e,t,r){function n(e){return a.call(e).slice(8,-1)}var o=e("./$"),i=e("./$.wks")("toStringTag"),a={}.toString;n.classof=function(e){var t,r;return void 0==e?void 0===e?"Undefined":"Null":"string"==typeof(r=(t=Object(e))[i])?r:n(t)},n.set=function(e,t,r){e&&!o.has(e=r?e:e.prototype,i)&&o.hide(e,i,t)},t.exports=n},{"./$":14,"./$.wks":20}],6:[function(e,t,r){"use strict";function n(e,t){if(!p(e))return("string"==typeof e?"S":"P")+e;if(y(e))return"F";if(!l(e,v)){if(!t)return"E";d(e,v,++E)}return"O"+e[v]}function o(e,t){var r,o=n(t);if("F"!=o)return e[$][o];for(r=e[m];r;r=r.n)if(r.k==t)return r}var i=e("./$"),a=e("./$.ctx"),s=e("./$.uid").safe,u=e("./$.assert"),c=e("./$.iter"),l=i.has,f=i.set,p=i.isObject,d=i.hide,h=c.step,y=Object.isFrozen||i.core.Object.isFrozen,v=s("id"),$=s("O1"),b=s("last"),m=s("first"),g=s("iter"),w=i.DESC?s("size"):"size",E=0;t.exports={getConstructor:function(e,t,r){function n(o){var a=u.inst(this,n,e);f(a,$,i.create(null)),f(a,w,0),f(a,b,void 0),f(a,m,void 0),void 0!=o&&c.forOf(o,t,a[r],a)}return i.mix(n.prototype,{clear:function(){for(var e=this,t=e[$],r=e[m];r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e[m]=e[b]=void 0,e[w]=0},"delete":function(e){var t=this,r=o(t,e);if(r){var n=r.n,i=r.p;delete t[$][r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),t[m]==r&&(t[m]=n),t[b]==r&&(t[b]=i),t[w]--}return!!r},forEach:function(e){for(var t,r=a(e,arguments[1],3);t=t?t.n:this[m];)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!o(this,e)}}),i.DESC&&i.setDesc(n.prototype,"size",{get:function(){return u.def(this[w])}}),n},def:function(e,t,r){var i,a,s=o(e,t);return s?s.v=r:(e[b]=s={i:a=n(t,!0),k:t,v:r,p:i=e[b],n:void 0,r:!1},e[m]||(e[m]=s),i&&(i.n=s),e[w]++,"F"!=a&&(e[$][a]=s)),e},getEntry:o,getIterConstructor:function(){return function(e,t){f(this,g,{o:e,k:t})}},next:function(){for(var e=this[g],t=e.k,r=e.l;r&&r.r;)r=r.p;return e.o&&(e.l=r=r?r.n:e.o[m])?"key"==t?h(0,r.k):"value"==t?h(0,r.v):h(0,[r.k,r.v]):(e.o=void 0,h(1))}}},{"./$":14,"./$.assert":4,"./$.ctx":8,"./$.iter":13,"./$.uid":18}],7:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.def"),i=e("./$.iter"),a=e("./$.assert").inst;t.exports=function(t,r,s,u,c){function l(e,t){var r=h[e];n.FW&&(h[e]=function(e,n){var o=r.call(this,0===e?0:e,n);return t?this:o})}var f=n.g[t],p=f,d=u?"set":"add",h=p&&p.prototype,y={};if(n.isFunction(p)&&(c||!i.BUGGY&&h.forEach&&h.entries)){var v,$=new p,b=$[d](c?{}:-0,1);e("./$.iter-detect")(function(e){new p(e)})||(p=function(e){a(this,p,t);var r=new f;return void 0!=e&&i.forOf(e,u,r[d],r),r},p.prototype=h,n.FW&&(h.constructor=p)),c||$.forEach(function(e,t){v=1/t===-(1/0)}),v&&(l("delete"),l("has"),u&&l("get")),(v||b!==$)&&l(d,!0)}else p=s.getConstructor(t,u,d),n.mix(p.prototype,r);return e("./$.cof").set(p,t),e("./$.species")(p),y[t]=p,o(o.G+o.W+o.F*(p!=f),y),c||i.std(p,t,s.getIterConstructor(),s.next,u?"key+value":"value",!u,!0),p}},{"./$":14,"./$.assert":4,"./$.cof":5,"./$.def":9,"./$.iter":13,"./$.iter-detect":12,"./$.species":15}],8:[function(e,t,r){var n=e("./$.assert").fn;t.exports=function(e,t,r){if(n(e),~r&&void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./$.assert":4}],9:[function(e,t,r){function n(e,t){return function(){return e.apply(t,arguments)}}function o(e,t,r){var c,l,f,p,d=e&o.G,h=d?a:e&o.S?a[t]:(a[t]||{}).prototype,y=d?s:s[t]||(s[t]={});d&&(r=t);for(c in r)l=!(e&o.F)&&h&&c in h,l&&c in y||(f=l?h[c]:r[c],d&&!u(h[c])?p=r[c]:e&o.B&&l?p=n(f,a):e&o.W&&h[c]==f?!function(e){p=function(t){return this instanceof e?new e(t):e(t)},p.prototype=e.prototype}(f):p=e&o.P&&u(f)?n(Function.call,f):f,i.hide(y,c,p))}var i=e("./$"),a=i.g,s=i.core,u=i.isFunction;o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,t.exports=o},{"./$":14}],10:[function(e,t,r){t.exports=function(e){return e.FW=!1,e.path=e.core,e}},{}],11:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3]);case 5:return n?e(t[0],t[1],t[2],t[3],t[4]):e.call(r,t[0],t[1],t[2],t[3],t[4])}return e.apply(r,t)}},{}],12:[function(e,t,r){var n=e("./$.wks")("iterator"),o=!1;try{var i=[7][n]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(e){if(!o)return!1;var t=!1;try{var r=[7],i=r[n]();i.next=function(){t=!0},r[n]=function(){return i},e(r)}catch(a){}return t}},{"./$.wks":20}],13:[function(e,t,r){"use strict";function n(e,t){u.hide(e,d,t),h in[]&&u.hide(e,h,t)}function o(e,t,r,o){var i=e.prototype,a=i[d]||i[h]||o&&i[o]||r;if(u.FW&&n(i,a),a!==r){var s=u.getProto(a.call(new e));l.set(s,t+" Iterator",!0),u.FW&&u.has(i,h)&&n(s,u.that)}return y[t]=a,y[t+" Iterator"]=u.that,a}function i(e){var t=u.g.Symbol,r=e[t&&t.iterator||h],n=r||e[d]||y[l.classof(e)];return p(n.call(e))}function a(e){var t=e["return"];void 0!==t&&p(t.call(e))}function s(e,t,r,n){try{return n?t(p(r)[0],r[1]):t(r)}catch(o){throw a(e),o}}var u=e("./$"),c=e("./$.ctx"),l=e("./$.cof"),f=e("./$.def"),p=e("./$.assert").obj,d=e("./$.wks")("iterator"),h="@@iterator",y={},v={},$="keys"in[]&&!("next"in[].keys());n(v,u.that);var b=t.exports={BUGGY:$,Iterators:y,prototype:v,step:function(e,t){return{value:t,done:!!e}},stepCall:s,close:a,is:function(e){var t=Object(e),r=u.g.Symbol,n=r&&r.iterator||h;return n in t||d in t||u.has(y,l.classof(t))},get:i,set:n,create:function(e,t,r,n){e.prototype=u.create(n||b.prototype,{next:u.desc(1,r)}),l.set(e,t+" Iterator")},define:o,std:function(e,t,r,n,i,a,s){function c(e){return function(){return new r(this,e)}}b.create(r,t,n);var l,p,d=c("key+value"),h=c("value"),y=e.prototype;if("value"==i?h=o(e,t,h,"values"):d=o(e,t,d,"entries"),i&&(l={entries:d,keys:a?h:c("key"),values:h},f(f.P+f.F*$,t,l),s))for(p in l)p in y||u.hide(y,p,l[p])},forOf:function(e,t,r,n){for(var o,u=i(e),l=c(r,n,t?2:1);!(o=u.next()).done;)if(s(u,l,o.value,t)===!1)return a(u)}}},{"./$":14,"./$.assert":4,"./$.cof":5,"./$.ctx":8,"./$.def":9,"./$.wks":20}],14:[function(e,t,r){"use strict";function n(e){return isNaN(e=+e)?0:(e>0?y:h)(e)}function o(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function i(e,t,r){return e[t]=r,e}function a(e){return b?function(t,r,n){return g.setDesc(t,r,o(e,n))}:i}function s(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function u(e){return"function"==typeof e}function c(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var l="undefined"!=typeof self?self:Function("return this")(),f={},p=Object.defineProperty,d={}.hasOwnProperty,h=Math.ceil,y=Math.floor,v=Math.max,$=Math.min,b=!!function(){try{return 2==p({},"a",{get:function(){return 2}}).a}catch(e){}}(),m=a(1),g=t.exports=e("./$.fw")({g:l,core:f,html:l.document&&document.documentElement,isObject:s,isFunction:u,it:function(e){return e},that:function(){return this},toInteger:n,toLength:function(e){return e>0?$(n(e),9007199254740991):0},toIndex:function(e,t){return e=n(e),0>e?v(e+t,0):$(e,t)},has:function(e,t){return d.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:b,desc:o,getDesc:Object.getOwnPropertyDescriptor,setDesc:p,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:c,ES5Object:Object,toObject:function(e){return g.ES5Object(c(e))},hide:m,def:a(0),set:l.Symbol?i:m,mix:function(e,t){for(var r in t)m(e,r,t[r]);return e},each:[].forEach});"undefined"!=typeof __e&&(__e=f),"undefined"!=typeof __g&&(__g=l)},{"./$.fw":10}],15:[function(e,t,r){var n=e("./$");t.exports=function(t){n.DESC&&n.FW&&n.setDesc(t,e("./$.wks")("species"),{configurable:!0,get:n.that})}},{"./$":14,"./$.wks":20}],16:[function(e,t,r){"use strict";var n=e("./$");t.exports=function(e){return function(t){var r,o,i=String(n.assertDefined(this)),a=n.toInteger(t),s=i.length;return 0>a||a>=s?e?"":void 0:(r=i.charCodeAt(a),55296>r||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):r:e?i.slice(a,a+2):(r-55296<<10)+(o-56320)+65536)}}},{"./$":14}],17:[function(e,t,r){"use strict";function n(){var e=+this;if(u.has(x,e)){var t=x[e];delete x[e],t()}}function o(e){n.call(e.data)}var i,a,s,u=e("./$"),c=e("./$.ctx"),l=e("./$.cof"),f=e("./$.invoke"),p=u.g,d=u.isFunction,h=u.html,y=p.document,v=p.process,$=p.setImmediate,b=p.clearImmediate,m=p.postMessage,g=p.addEventListener,w=p.MessageChannel,E=0,x={},j="onreadystatechange";d($)&&d(b)||($=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return x[++E]=function(){f(d(e)?e:Function(e),t)},i(E),E},b=function(e){delete x[e]},"process"==l(v)?i=function(e){v.nextTick(c(n,e,1))}:g&&d(m)&&!p.importScripts?(i=function(e){m(e,"*")},g("message",o,!1)):d(w)?(a=new w,s=a.port2,a.port1.onmessage=o,i=c(s.postMessage,s,1)):i=y&&j in y.createElement("script")?function(e){h.appendChild(y.createElement("script"))[j]=function(){h.removeChild(this),n.call(e)}}:function(e){setTimeout(c(n,e,1),0)}),t.exports={set:$,clear:b}},{"./$":14,"./$.cof":5,"./$.ctx":8,"./$.invoke":11}],18:[function(e,t,r){function n(e){return"Symbol("+e+")_"+(++o+Math.random()).toString(36)}var o=0;n.safe=e("./$").g.Symbol||n,t.exports=n},{"./$":14}],19:[function(e,t,r){var n=e("./$"),o=e("./$.wks")("unscopables");!n.FW||o in[]||n.hide(Array.prototype,o,{}),t.exports=function(e){n.FW&&([][o][e]=!0)}},{"./$":14,"./$.wks":20}],20:[function(e,t,r){var n=e("./$").g,o={};t.exports=function(t){return o[t]||(o[t]=n.Symbol&&n.Symbol[t]||e("./$.uid").safe("Symbol."+t))}},{"./$":14,"./$.uid":18}],21:[function(e,t,r){var n=e("./$"),o=e("./$.unscope"),i=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step,u=a.Iterators;a.std(Array,"Array",function(e,t){n.set(this,i,{o:n.toObject(e),i:0,k:t})},function(){var e=this[i],t=e.o,r=e.k,n=e.i++;return!t||n>=t.length?(e.o=void 0,s(1)):"key"==r?s(0,n):"value"==r?s(0,t[n]):s(0,[n,t[n]])},"value"),u.Arguments=u.Array,o("keys"),o("values"),o("entries")},{"./$":14,"./$.iter":13,"./$.uid":18,"./$.unscope":19}],22:[function(e,t,r){"use strict";var n=e("./$.collection-strong");e("./$.collection")("Map",{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},{"./$.collection":7,"./$.collection-strong":6}],23:[function(e,t,r){
"use strict";function n(e){var t=P(e)[v];return void 0!=t?t:e}function o(e){var t;return _(e)&&(t=e.then),A(t)?t:!1}function i(e){var t,r=e[$],n=r.c,o=0;if(r.h)return!1;for(;n.length>o;)if(t=n[o++],t.fail||!i(t.P))return!1;return!0}function a(e,t){var r=e.c;(t||r.length)&&E(function(){var n=e.p,a=e.v,s=1==e.s,u=0;if(t&&i(n))setTimeout(function(){i(n)&&("process"==p(w)?w.emit("unhandledRejection",a,n):g.console&&A(console.error)&&console.error("Unhandled promise rejection",a))},1e3);else for(;r.length>u;)!function(t){var r,n,i=s?t.ok:t.fail;try{i?(s||(e.h=!0),r=i===!0?a:i(a),r===t.P?t.rej(TypeError(m+"-chain cycle")):(n=o(r))?n.call(r,t.res,t.rej):t.res(r)):t.rej(a)}catch(u){t.rej(u)}}(r[u++]);r.length=0})}function s(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,a(t,!0))}function u(e){var t,r,n=this;if(!n.d){n.d=!0,n=n.r||n;try{(t=o(e))?(r={r:n,d:!1},t.call(e,f(u,r,1),f(s,r,1))):(n.v=e,n.s=1,a(n))}catch(i){s.call(r||{r:n,d:!1},i)}}}var c,l=e("./$"),f=e("./$.ctx"),p=e("./$.cof"),d=e("./$.def"),h=e("./$.assert"),y=e("./$.iter"),v=e("./$.wks")("species"),$=e("./$.uid").safe("record"),b=y.forOf,m="Promise",g=l.g,w=g.process,E=w&&w.nextTick||e("./$.task").set,x=g[m],j=x,A=l.isFunction,_=l.isObject,k=h.fn,P=h.obj;A(x)&&A(x.resolve)&&x.resolve(c=new x(function(){}))==c||(x=function(e){k(e);var t={p:h.inst(this,x,m),c:[],s:0,d:!1,v:void 0,h:!1};l.hide(this,$,t);try{e(f(u,t,1),f(s,t,1))}catch(r){s.call(t,r)}},l.mix(x.prototype,{then:function(e,t){var r=P(P(this).constructor)[v],n={ok:A(e)?e:!0,fail:A(t)?t:!1},o=n.P=new(void 0!=r?r:x)(function(e,t){n.res=k(e),n.rej=k(t)}),i=this[$];return i.c.push(n),i.s&&a(i),o},"catch":function(e){return this.then(void 0,e)}})),d(d.G+d.W+d.F*(x!=j),{Promise:x}),p.set(x,m),e("./$.species")(x),d(d.S,m,{reject:function(e){return new(n(this))(function(t,r){r(e)})},resolve:function(e){return _(e)&&$ in e&&l.getProto(e)===this.prototype?e:new(n(this))(function(t){t(e)})}}),d(d.S+d.F*!e("./$.iter-detect")(function(e){x.all(e)["catch"](function(){})}),m,{all:function(e){var t=n(this),r=[];return new t(function(n,o){b(e,!1,r.push,r);var i=r.length,a=Array(i);i?l.each.call(r,function(e,r){t.resolve(e).then(function(e){a[r]=e,--i||n(a)},o)}):n(a)})},race:function(e){var t=n(this);return new t(function(r,n){b(e,!1,function(e){t.resolve(e).then(r,n)})})}})},{"./$":14,"./$.assert":4,"./$.cof":5,"./$.ctx":8,"./$.def":9,"./$.iter":13,"./$.iter-detect":12,"./$.species":15,"./$.task":17,"./$.uid":18,"./$.wks":20}],24:[function(e,t,r){var n=e("./$").set,o=e("./$.string-at")(!0),i=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step;a.std(String,"String",function(e){n(this,i,{o:String(e),i:0})},function(){var e,t=this[i],r=t.o,n=t.i;return n>=r.length?s(1):(e=o.call(r,n),t.i+=e.length,s(0,e))})},{"./$":14,"./$.iter":13,"./$.string-at":16,"./$.uid":18}],25:[function(e,t,r){e("./es6.array.iterator");var n=e("./$"),o=e("./$.iter").Iterators,i=e("./$.wks")("iterator"),a=o.Array,s=n.g.NodeList;!n.FW||!s||i in s.prototype||n.hide(s.prototype,i,a),o.NodeList=a},{"./$":14,"./$.iter":13,"./$.wks":20,"./es6.array.iterator":21}],26:[function(e,t,r){"use strict";function n(e,t,r){return t===p?e.beanFromDolphin.get(r):r}function o(e,t,r){return t===p?e.beanToDolphin.get(r):r}function i(e,t,r,n,o){var i=e[t];c(i)?Array.isArray(i)||(e[t]=i=[i]):e[t]=i=[],"undefined"==typeof o?i.splice(r,n):i.splice(r,n,o)}function a(){this.classes=new u,this.beanFromDolphin=new u,this.beanToDolphin=new u,this.classInfos=new u}e("./polyfills.js");var s=window.ObjectObserver,u=e("../bower_components/core.js/library/fn/map"),c=e("./utils.js").exists,l=0,f=1,p=2;a.prototype.registerClass=function(e){if(!this.classes.has(e.id)){var t={};e.attributes.forEach(function(e){t[e.propertyName]=l,e.onValueChange(function(r){t[e.propertyName]=r.newValue})}),this.classes.set(e.id,t)}},a.prototype.unregisterClass=function(e){this.classes["delete"](e.id)},a.prototype.load=function(e){var t=this,r=this.classes.get(e.presentationModelType),i={};e.attributes.filter(function(e){return e.tag===opendolphin.Tag.value()}).forEach(function(e){i[e.propertyName]=null,e.onValueChange(function(o){o.oldValue!==o.newValue&&(i[e.propertyName]=n(t,r[e.propertyName],o.newValue))})});var a=new s(i);return a.open(function(n,i,a){Object.keys(n).forEach(function(i){var a=e.findAttributeByPropertyName(i);if(c(a)){var s=o(t,r[i],n[i]);a.setValue(s)}}),Object.keys(i).forEach(function(t){var r=e.findAttributeByPropertyName(t);c(r)&&r.setValue(null)}),Object.keys(a).forEach(function(n){var i=e.findAttributeByPropertyName(n);if(c(i)){var s=o(t,r[n],a[n]);i.setValue(s)}})}),this.beanFromDolphin.set(e.id,i),this.beanToDolphin.set(i,e.id),this.classInfos.set(e.id,r),i},a.prototype.unload=function(e){var t=this.beanFromDolphin.get(e.id);return this.beanFromDolphin["delete"](e.id),this.beanToDolphin["delete"](t),this.classInfos["delete"](e.id),t},a.prototype.addListEntry=function(e){var t=e.findAttributeByPropertyName("source"),r=e.findAttributeByPropertyName("attribute"),o=e.findAttributeByPropertyName("pos"),a=e.findAttributeByPropertyName("element");if(!(c(t)&&c(r)&&c(o)&&c(a)))throw new Error("Invalid list modification update received");var s=this.classInfos.get(t.value),u=this.beanFromDolphin.get(t.value);if(!c(u)||!c(s))throw new Error("Invalid list modification update received. Source bean unknown.");var l=n(this,s[r.value],a.value);i(u,r.value,o.value,0,l)},a.prototype.delListEntry=function(e){var t=e.findAttributeByPropertyName("source"),r=e.findAttributeByPropertyName("attribute"),n=e.findAttributeByPropertyName("from"),o=e.findAttributeByPropertyName("to");if(!(c(t)&&c(r)&&c(n)&&c(o)))throw new Error("Invalid list modification update received");var a=this.beanFromDolphin.get(t.value);if(!c(a))throw new Error("Invalid list modification update received. Source bean unknown.");i(a,r.value,n.value,o.value-n.value)},a.prototype.setListEntry=function(e){var t=e.findAttributeByPropertyName("source"),r=e.findAttributeByPropertyName("attribute"),o=e.findAttributeByPropertyName("pos"),a=e.findAttributeByPropertyName("element");if(!(c(t)&&c(r)&&c(o)&&c(a)))throw new Error("Invalid list modification update received");var s=this.classInfos.get(t.value),u=this.beanFromDolphin.get(t.value);if(!c(u)||!c(s))throw new Error("Invalid list modification update received. Source bean unknown.");var l=n(this,s[r.value],a.value);i(u,r.value,o.value,1,l)},a.prototype.mapParamToDolphin=function(e){if(!c(e))return{value:e,type:l};var t=typeof e;if("object"===t){var r=this.beanToDolphin.get(e);if(c(r))return{value:r,type:p};throw new TypeError("Only managed Dolphin Beans can be used")}if("string"===t||"number"===t||"boolean"===t)return{value:e,type:f};throw new TypeError("Only managed Dolphin Beans and primitive types can be used")},r.ClassRepository=a,r.UNKNOWN=l,r.BASIC_TYPE=f,r.DOLPHIN_BEAN=p},{"../bower_components/core.js/library/fn/map":2,"./polyfills.js":28,"./utils.js":29}],27:[function(e,t,r){"use strict";function n(e,t,r){return null===r?null:t===v?e.beanFromDolphin.get(r):r}function o(e,t){return"object"==typeof t?e.beanToDolphin.get(t):t}function i(e,t,r,n,o){var i=[e.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),e.attribute("source",null,t),e.attribute("attribute",null,r),e.attribute("pos",null,n),e.attribute("element",null,o)];e.presentationModel.apply(e,[null,"@@@ LIST_ADD @@@"].concat(i))}function a(e,t,r,n,o){var i=[e.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),e.attribute("source",null,t),e.attribute("attribute",null,r),e.attribute("from",null,n),e.attribute("to",null,o)];e.presentationModel.apply(e,[null,"@@@ LIST_DEL @@@"].concat(i))}function s(e,t,r,n){var o=r[n];d(o)||e.propertyUpdateHandlers.forEach(function(e){e(t,r,n,[],void 0)})}function u(e,t){if(d($))throw new Error("Trying to create a block while another block exists");$={bean:e,propertyName:t}}function c(e,t){return d($)&&$.bean===e&&$.propertyName===t}function l(){$=null}function f(e){this.dolphin=e,this.classes=new p,this.beanFromDolphin=new p,this.beanToDolphin=new p,this.classInfos=new p,this.propertyUpdateHandlers=[],this.arrayUpdateHandlers=[]}e("./polyfills.js");var p=(window.ObjectObserver,e("../bower_components/core.js/library/fn/map")),d=e("./utils.js").exists,h=0,y=1,v=2,$=null;f.prototype.notifyBeanChange=function(e,t,r){var i=this.beanToDolphin.get(e);if(d(i)){var a=this.dolphin.findPresentationModelById(i);if(d(a)){var s=this.classes.get(a.presentationModelType),u=s[t],c=a.findAttributeByPropertyName(t);if(d(u)&&d(c)){var l=c.getValue();return c.setValue(o(this,r)),n(this,u,l)}}}},f.prototype.notifyArrayChange=function(e,t,r,n,s){if(!c(e,t)){var u=this.beanToDolphin.get(e),l=e[t];if(d(u)&&d(l)){Array.isArray(s)&&s.length>0&&a(this.dolphin,u,t,r,r+s.length);for(var f=r;r+n>f;f++)i(this.dolphin,u,t,f,o(this,l[f]))}}},f.prototype.onBeanUpdate=function(e){this.propertyUpdateHandlers.push(e)},f.prototype.onArrayUpdate=function(e){this.arrayUpdateHandlers.push(e)},f.prototype.registerClass=function(e){if(!this.classes.has(e.id)){var t={};e.attributes.filter(function(e){return e.propertyName.search(/^@@@ /)<0}).forEach(function(e){t[e.propertyName]=h,e.onValueChange(function(r){t[e.propertyName]=r.newValue})}),this.classes.set(e.id,t)}},f.prototype.unregisterClass=function(e){this.classes["delete"](e.id)},f.prototype.load=function(e){var t=this,r=this.classes.get(e.presentationModelType),o={};return e.attributes.filter(function(e){return e.tag===opendolphin.Tag.value()&&e.propertyName.search(/^@@@ /)<0}).forEach(function(i){o[i.propertyName]=null,i.onValueChange(function(a){if(a.oldValue!==a.newValue){var s=n(t,r[i.propertyName],a.oldValue),u=n(t,r[i.propertyName],a.newValue);t.propertyUpdateHandlers.forEach(function(t){t(e.presentationModelType,o,i.propertyName,u,s)})}})}),this.beanFromDolphin.set(e.id,o),this.beanToDolphin.set(o,e.id),this.classInfos.set(e.id,r),o},f.prototype.unload=function(e){var t=this.beanFromDolphin.get(e.id);return this.beanFromDolphin["delete"](e.id),this.beanToDolphin["delete"](t),this.classInfos["delete"](e.id),t},f.prototype.addListEntry=function(e){var t=e.findAttributeByPropertyName("source"),r=e.findAttributeByPropertyName("attribute"),o=e.findAttributeByPropertyName("pos"),i=e.findAttributeByPropertyName("element");if(!(d(t)&&d(r)&&d(o)&&d(i)))throw new Error("Invalid list modification update received");var a=this.classInfos.get(t.value),c=this.beanFromDolphin.get(t.value);if(!d(c)||!d(a))throw new Error("Invalid list modification update received. Source bean unknown.");var f=e.presentationModelType,p=n(this,a[r.value],i.value);s(this,f,c,r.value);try{u(c,r.value),this.arrayUpdateHandlers.forEach(function(e){e(f,c,r.value,o.value,0,p)})}finally{l()}},f.prototype.delListEntry=function(e){var t=e.findAttributeByPropertyName("source"),r=e.findAttributeByPropertyName("attribute"),n=e.findAttributeByPropertyName("from"),o=e.findAttributeByPropertyName("to");if(!(d(t)&&d(r)&&d(n)&&d(o)))throw new Error("Invalid list modification update received");var i=this.beanFromDolphin.get(t.value);if(!d(i))throw new Error("Invalid list modification update received. Source bean unknown.");var a=e.presentationModelType;s(this,a,i,r.value);try{u(i,r.value),this.arrayUpdateHandlers.forEach(function(e){e(a,i,r.value,n.value,o.value-n.value)})}finally{l()}},f.prototype.setListEntry=function(e){var t=e.findAttributeByPropertyName("source"),r=e.findAttributeByPropertyName("attribute"),o=e.findAttributeByPropertyName("pos"),i=e.findAttributeByPropertyName("element");if(!(d(t)&&d(r)&&d(o)&&d(i)))throw new Error("Invalid list modification update received");var a=this.classInfos.get(t.value),c=this.beanFromDolphin.get(t.value);if(!d(c)||!d(a))throw new Error("Invalid list modification update received. Source bean unknown.");var f=e.presentationModelType,p=n(this,a[r.value],i.value);s(this,f,c,r.value);try{u(c,r.value),this.arrayUpdateHandlers.forEach(function(e){e(f,c,r.value,o.value,1,p)})}finally{l()}},f.prototype.mapParamToDolphin=function(e){if(!d(e))return{value:e,type:h};var t=typeof e;if("object"===t){var r=this.beanToDolphin.get(e);if(d(r))return{value:r,type:v};throw new TypeError("Only managed Dolphin Beans can be used")}if("string"===t||"number"===t||"boolean"===t)return{value:e,type:y};throw new TypeError("Only managed Dolphin Beans and primitive types can be used")},r.ClassRepository=f,r.UNKNOWN=h,r.BASIC_TYPE=y,r.DOLPHIN_BEAN=v},{"../bower_components/core.js/library/fn/map":2,"./polyfills.js":28,"./utils.js":29}],28:[function(e,t,r){Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var r,n;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=t),n=0;i>n;){var a;n in o&&(a=o[n],e.call(r,a,n,o)),n++}}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],o=arguments.length>=2?arguments[1]:void 0,i=0;r>i;i++)if(i in t){var a=t[i];e.call(o,a,i,t)&&n.push(a)}return n})},{}],29:[function(e,t,r){"use strict";t.exports.exists=function(e){return"undefined"!=typeof e&&null!==e}},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,t,r){"use strict";function n(e){var t=new a(e);return{bind:function(e,r){var n=this[e];this[e]=r;var i=Polymer.CaseMap.camelToDashCase(e)+"-changed";this.unlisten(this,i,"_dolphinObserver"),this.listen(this,i,"_dolphinObserver"),o(n)&&t.unbind(this,e,n),t.bind(this,e,r)},_dolphinObserver:function(r){var n,a,s,u,c=r.detail.path,l=r.detail.value;if(o(l.indexSplices)){if(c=c.substr(0,c.length-".splices".length),n=i(this,c),null!==n){a=c.match(/[^\.]+$/);var f=l.indexSplices.length;for(s=0;f>s;s++){var p=l.indexSplices[s];e.notifyArrayChange(n,a[0],p.index,p.addedCount,p.removed);var d=n[a[0]];for(u=0;u<p.removed.length;u++)t.unbind(this,c+"."+(p.index+u),p.removed[u]);for(u=p.index+p.addedCount;u<d.length;u++){var h=u-p.addedCount+p.removed.length;t.unbind(this,c+"."+h,d[u])}for(u=p.index;u<d.length;u++)t.bind(this,c+"."+u,d[u])}}}else if(n=i(this,c),null!==n&&!Array.isArray(n)&&!Array.isArray(l)){a=c.match(/[^\.]+$/);var y=e.notifyBeanChange(n,a[0],l);null!==y&&t.unbind(this,c,y),null!==l&&t.bind(this,c,l)}}}}function o(e){return"undefined"!=typeof e&&null!==e}function i(e,t){var r=t.match(/^(.*)\.[^\.]*$/);return null===r?e:e.get(r[1],e)}var a=e("./deep-bind.js").Binder;r.createBaseBehavior=n},{"./deep-bind.js":52}],52:[function(e,t,r){"use strict";function n(e){this.listeners=new s,e.onBeanUpdate(i(this,this.onBeanUpdateHandler)),e.onArrayUpdate(i(this,this.onArrayUpdateHandler))}function o(e){return"undefined"!=typeof e&&null!==e}function i(e,t){return function(){t.apply(e,arguments)}}function a(e,t){if(e===t||!o(e)&&!o(t))return!0;if(o(e)!==o(t))return!1;var r=e.length;if(t.length!==r)return!1;for(var n=0;r>n;n++)if(e[n]!==t[n])return!1;return!0}var s=e("../bower_components/core.js/library/fn/map");n.prototype.onBeanUpdateHandler=function(e,t,r,n){if(n!==r){var i=this.listeners.get(e);if(o(i)&&i.length>0){var a=i[0],s=a.element,u=a.rootPath+"."+t;s.set(u,r)}else e[t]=r}},n.prototype.onArrayUpdateHandler=function(e,t,r,n,i){var s=e[t],u=s.slice(r,r+n);if(!a(i,u)){var c=this.listeners.get(e);if(o(c)&&c.length>0){var l=c[0],f=l.element,p=l.rootPath+"."+t;"undefined"==typeof i?f.splice(p,r,n):f.splice(p,r,n,i)}else"undefined"==typeof i?s.splice(r,n):s.splice(r,n,i)}},n.prototype.bind=function(e,t,r){if(o(r)&&"object"==typeof r){var n=this.listeners.get(r);if(o(n)||(n=[],this.listeners.set(r,n)),n.push({element:e,rootPath:t}),Array.isArray(r))for(var i=0;i<r.length;i++)this.bind(e,t+"."+i,r[i]);else if("object"==typeof r)for(var a in r)this.bind(e,t+"."+a,r[a])}},n.prototype.unbind=function(e,t,r){if(o(r)&&"object"==typeof r){var n=this.listeners.get(r);if(o(n))for(var i=n.length,a=0;i>a;a++){var s=n[a];if(s.element===e&&s.rootPath===t){if(n.splice(a,1),Array.isArray(r))for(var u=0;u<r.length;u++)this.unbind(e,t+"."+u,r[u]);else if("object"==typeof r)for(var c in r)this.unbind(e,t+"."+c,r[c]);return}}}},r.Binder=n},{"../bower_components/core.js/library/fn/map":1}],53:[function(e,t,r){"use strict";var n=e("../bower_components/dolphin-js/dist/dolphin.js").connect2,o=e("./base-behavior.js").createBaseBehavior;r.connect=function(e,t){var r=n(e,t);return r.BaseBehavior=o(r),r}},{"../bower_components/dolphin-js/dist/dolphin.js":50,"./base-behavior.js":51}]},{},[53])(53)});
//# sourceMappingURL=dolphin-polymer.min.js.map